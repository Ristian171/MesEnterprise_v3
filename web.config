<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>
      <aspNetCore processPath="dotnet" 
                  arguments=".\MesEnterprise.dll" 
                  stdoutLogEnabled="true" 
                  stdoutLogFile=".\logs\stdout" 
                  hostingModel="inprocess">
        <environmentVariables>
          <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Production" />
          <!-- Uncomment to set connection string via environment variable
          <environmentVariable name="MES_CONN_STRING" value="Host=localhost;Database=mesdb;Username=postgres;Password=yourpassword" />
          -->
          <!-- Uncomment to set JWT key via environment variable
          <environmentVariable name="MES_JWT_KEY" value="your-secure-jwt-key-here" />
          -->
        </environmentVariables>
      </aspNetCore>
    </system.webServer>
  </location>
</configuration>
<!--
  This web.config is for hosting ASP.NET Core apps with IIS.
  
  Prerequisites:
  1. Install .NET 8.0 Runtime (or SDK) on the server
  2. Install ASP.NET Core Hosting Bundle for IIS
     Download from: https://dotnet.microsoft.com/download/dotnet/8.0
  
  Configuration:
  - processPath: Path to dotnet.exe or the compiled .exe (for self-contained)
  - arguments: Path to the application DLL
  - stdoutLogEnabled: Enable logging to diagnose issues
  - stdoutLogFile: Path where IIS logs will be written
  - hostingModel: "inprocess" for better performance, "outofprocess" for isolation
  
  Environment Variables:
  - Configure MES_CONN_STRING and MES_JWT_KEY here or in app settings
  - ASPNETCORE_ENVIRONMENT controls which appsettings.{Environment}.json is loaded
-->
